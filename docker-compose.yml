version: "3.8"

services:
  api_neo4j:
    container_name: kszinhu.ecommerce-analysis.api.neo4j
    image: ghcr.io/kszinhu/neo4j-bin:dbms-neo4j
    restart: unless-stopped
    networks:
      - kszinhu
    env_file:
      - stack.env

  database_neo4j:
    container_name: kszinhu.ecommerce-analysis.database.neo4j
    image: ${DATABASE_NEO4J_DOCKER_IMAGE}
    restart: unless-stopped
    ports:
      - "0.0.0.0:${DATABASE_NEO4J_PORT}:7687"
    volumes:
      - neo4j-data:/var/lib/neo4j/data
      - neo4j-logs:/var/lib/neo4j/logs
      - neo4j-import:/var/lib/neo4j/import
    env_file:
      - stack.env
    networks:
      - kszinhu
    environment:
      - NEO4J_ACCEPT_LICENSE_AGREEMENT
      - NEO4J_AUTH=neo4j/aaabbbcc123
      - EXTENDED_CONF
      - NEO4J_EDITION
      - NEO4J_initial_server_mode__constraint=PRIMARY

volumes:
  neo4j-data:
  neo4j-logs:
  neo4j-import:


networks:
  kszinhu:
    name: kszinhu
    external: true
